<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Template — Home</title>
  <link rel="stylesheet" href="assets/styles.css">
</head>
<body>
  <header class="topbar">
    <div class="brand">MyApp</div>
    <div class="actions">
      <span id="welcome" class="welcome">Welcome</span>
      <button id="signOutBtn" class="btn outline">Sign Out</button>
    </div>
  </header>

  <main class="container">
    <section class="card">
      <h2>Protected Homepage</h2>
      <p>This page is protected and requires signing in. The template uses a simple client-side session (localStorage) suitable for demo and prototyping.</p>

      <div id="contentArea">
        <!-- dynamic content -->
      </div>
    </section>

    <section class="card">
      <h3>Quick Actions</h3>
      <button id="profileBtn" class="btn">View Profile</button>
      <button id="clearDataBtn" class="btn danger">Clear Demo Data</button>
    </section>
  </main>

  <script src="assets/auth.js" defer></script>
  <script>
    // Protect the page and show user info
    const signOutBtn = document.getElementById('signOutBtn');
    const welcome = document.getElementById('welcome');
    const contentArea = document.getElementById('contentArea');
    const profileBtn = document.getElementById('profileBtn');
    const clearDataBtn = document.getElementById('clearDataBtn');

    const session = getSession();
    if (!session) {
      // Not signed in — redirect
      window.location.href = 'signin.html';
    } else {
      welcome.textContent = session.email;
      contentArea.innerHTML = `
        <p><strong>Email:</strong> ${session.email}</p>
        <p><em>Signed in at:</em> ${new Date(session.signedAt).toLocaleString()}</p>
      `;
    }

    signOutBtn.addEventListener('click', () => {
      logout();
      window.location.href = 'signin.html';
    });

    profileBtn.addEventListener('click', () => {
      alert('Profile — email: ' + session.email + '\\nThis is a demo profile.');
    });

    clearDataBtn.addEventListener('click', () => {
      if (!confirm('Remove demo users and sign out?')) return;
      clearDemoData();
      logout();
      window.location.href = 'signin.html';
    });
  </script>
</body>
</html>
