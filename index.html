<!DOCTYPE html>
<html>
  <head>
    <title>My First Render Site</title>
  </head>
  <body>
    <h1>Hello! Your site is working.</h1>
    <p>This is the simplest possible setup.</p>

    <button id="testButton">Send Test to Supabase</button>

    <!-- Public environment variables -->
    <script>
      window.env = {
        NEXT_PUBLIC_SUPABASE_URL: "YOUR_SUPABASE_URL_HERE",
        NEXT_PUBLIC_SUPABASE_ANON_KEY: "YOUR_ANON_KEY_HERE"
      };
    </script>

    <!-- Supabase code -->
    <script type="module">
      import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

      const supabase = createClient(
        window.env.NEXT_PUBLIC_SUPABASE_URL,
        window.env.NEXT_PUBLIC_SUPABASE_ANON_KEY
      );

      document.getElementById("testButton").onclick = async () => {
        const { data, error } = await supabase
          .from("test_messages")
          .insert([{ message: "Hello from my website!" }]);

        if (error) {
          alert("Error: " + error.message);
        } else {
          alert("Success! Message sent to Supabase.");
        }
      };
    </script>
  </body>
</html>
