<!DOCTYPE html>
<html>
<head>
  <title>Parent Confirmation</title>
  <style>
    body { font-family: Arial; background:#2980b9; padding:40px; }
    .box { background:white; padding:25px; border-radius:10px; max-width:400px; margin:auto; }
    input, button { width:100%; padding:12px; margin-top:10px; }
  </style>
</head>

<body>
<div class="box">
  <h2>Parent Confirmation</h2>
  <p>Enter your email to approve your childâ€™s account.</p>

  <input id="parentEmail" type="email" placeholder="Parent Email">
  <button id="confirmBtn">Confirm</button>

  <p id="status"></p>
</div>

<script type="module">
  import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

  const supabase = createClient(
    "https://ytgwxpxjivruoewxbuyr.supabase.co",
    "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl0Z3d4cHhqaXZydW9ld3hidXlyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ0ODMxODcsImV4cCI6MjA4MDA1OTE4N30.YMWdo_dRFKt5uufujOZ9BKe-Ygdc0fau1qVnltfmP6o"
  );

  const child = new URLSearchParams(window.location.search).get("child");

  confirmBtn.onclick = async () => {
    const parent_email = parentEmail.value;

    const { error } = await supabase
      .from("parent_confirmations")
      .insert([{ child_username: child, parent_email }]);

    status.innerText = error ? error.message : "Confirmation recorded.";
  };
</script>
</body>
</html>
